<div class="center-container">
  <mat-card class="profile-page-card">
    <mat-card-title
      class="profile-page-card__header"
      mat-dialog-title>
      <div> Profile details</div>
      <mat-icon
        (click)="onEditProfilePageClick()"
        *ngIf="!isEditMode"
        [matTooltip]="'Edit'"
        class="icon-edit">edit
      </mat-icon>
    </mat-card-title>
    <mat-card-content class="profile-page-card__content">
      <form
        [formGroup]="profileForm"
        class="profile-form">
        <div class="profile-form profile-form--side">
          <div
            *ngIf="fileUrl"
            class="avatar-wrapper">
            <img
              [src]="fileUrl"
              alt="File"
              class="avatar-image">
          </div>
          <div
            *ngIf="isEditMode"
            class="upload-button">
            <label
              class="file-label"
              for="fileInput">
              <span>Upload new picture</span>
              <input
                (change)="onFileSelected($event)"
                id="fileInput"
                style="display: none;"
                type="file">
            </label>
          </div>
        </div>
        <div class="profile-form profile-form--side">
          <mat-form-field
            class="form-field">
            <mat-label>Username</mat-label>
            <input
              formControlName="username"
              matInput
              readonly>
          </mat-form-field>
          <mat-form-field class="form-field">
            <mat-label>First name</mat-label>
            <input
              formControlName="firstName"
              matInput>
          </mat-form-field>
          <mat-form-field class="form-field">
            <mat-label>Last name</mat-label>
            <input
              formControlName="lastName"
              matInput>
          </mat-form-field>
        </div>
        <div class="profile-form profile-form--side">
          <mat-form-field class="form-field">
            <mat-label>Email</mat-label>
            <input
              formControlName="email"
              matInput
              type="email">
          </mat-form-field>
          <mat-form-field class="form-field">
            <mat-label>City</mat-label>
            <input
              formControlName="city"
              matInput>
          </mat-form-field>
        </div>
      </form>
      <div
        *ngIf="isEditMode"
        class="button-wrapper">
        <button
          (click)="onDiscardProfileChanges()"
          class="button-discard"
          mat-button>Discard
        </button>
        <button
          (click)="onSaveProfileChanges()"
          [disabled]="profileForm.invalid"
          class="button-save"
          mat-button>Save
        </button>
      </div>
    </mat-card-content>
  </mat-card>
</div>
